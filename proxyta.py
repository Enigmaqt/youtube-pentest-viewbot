import time
import requests
import random
import threading

class proxy(): #class za handling na proxy-tata mainly izvlichane i redaktirane

    def update(self):
        while True:
            url = "https://api.proxyscrape.com/?request=getproxies&proxytype=http&timeout=10000&ssl=yes" #api za vzimane na proxy-ta
            r = requests.get(url)

            self.splited = r.text.split("\r\n")  #split-vane na proxy-tata
            time.sleep(600)

    def get_proxy(self):
        random1 = random.choice(self.splited)  # vzimane na random proxy
        return random1

    def FormatProxy(self):
        proxyOutput = {'https': self.get_proxy()}
        return proxyOutput

    def __init__(self):
        self.splited = []
        threading.Thread(target=self.update).start()
        #tva e ot modula threading (ne sum go pisal az), izpolzva se za izpulnenie na nqkolko nishki ednovremenno
        time.sleep(3)