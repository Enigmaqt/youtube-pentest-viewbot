import threading
import time
from printirane import main
from proxyta import proxy
import requests


token = input("ID?\n")
url = "https://m.youtube.com/watch?v=" + token #token-a e ID-to na youtube livestream-a
url2 = "https://s.youtube.com/api/stats/watchtime?ns=yt&el=detailpage&cpn=AiWtf2fjIwVS2MeQ&docid=" + token + "&ver=2&cmt=7926.045&ei=igGSXce3IM2NgAfasp-ABg&fmt=133&fs=0&rt=1096.007&of=L_224b5BokWsQ5UWgAws_w&euri&lact=2837&live=dvr&cl=271684942&state=playing&vm=CAEQABgEKhhJc0gwZ2w0QmFfbTBWSXlWNm9ITmRRPT0&volume=100&c=MWEB&cver=2.20190928.07.00&cplayer=UNIPLAYER&cbrand=apple&cbr=Safari%20Mobile&cbrver=12.1.15E148&cmodel=iphone&cos=iPhone&cosver=12_2&cplatform%20=MOBILE&delay=5&hl=ru_RU&cr=DE&rtn=1396&afmt=140&lio=1556394045.182&idpj=&ldpj=&rti=1096&muted=0&st=7626.045&et=7926.045 "
#url2 e user agent-a prez, koito shte gledat proxy-tata tva e api za user agent-a, koito sum izpolzval po-dolu v koda

a = main()

proxy1 = proxy()

def bot(): #funkciq za bota, koito shte vzima request-i chrez proxy-tata prez opredelen header
    while True:
        headers = {
            "Host": "m.youtube.com",
            "Accept-Encoding": "gzip, deflate",
            "User-Agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.1 Mobile/15E148 Safari/604.1",
            "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,/;q=0.8",
            "Accept-Language": "ru-RU,ru;q=0.9,en-US;q=0.8,en;q=0.7",
            "Connection": "close"
        } #davame informaciq na botovete a.k.a proxy-tata prez kakuv browser da vlizat, kakuv ezik da priemat etc.

        try:
            s = requests.session()
            s.get(url, headers=headers, proxies=proxy1.FormatProxy())  # stream request
            s.get(url2, headers=headers, proxies=proxy1.FormatProxy())  # api request
            a.botted += 1
        except:
            pass


time.sleep(7)
maxthreads = int(input("Kolko thread-a da pusna?\n"))

threading.Thread(target=a.printservice).start()
num = 0
while num < maxthreads: #cikul za spirane na threading sled kato e dostignat broq na vuvedeni threads
    num += 1
    threading.Thread(target=bot).start()

threading.Thread(target=bot).start()
